{"version":3,"file":"browser.js","names":["UNESCAPE_RE"],"sources":["../../helper/lib/index.js","../src/plugin.ts"],"sourcesContent":["const e=e=>{let t=e.split(`\n`),n=t.reduce((e,t)=>{for(let n=0;n<t.length;n++)if(t[n]!==` `&&t[n]!==`\t`)return Math.min(n,e);return e},1/0);return n<1/0?t.map(e=>e.slice(n)).join(`\n`):e},t=/[-/\\\\^$*+?.()|[\\]{}]/g,n=String.raw`\\$&`,r=e=>e.replaceAll(`&`,`&amp;`).replaceAll(`<`,`&lt;`).replaceAll(`>`,`&gt;`).replaceAll(`\"`,`&quot;`).replaceAll(`'`,`&#39;`),i=e=>e.replaceAll(t,n),a=/\\r\\n?|\\n/g,o=/\\\\([ \\\\!\"#$%&'()*+,./:;<=>?@[\\]^_`{|}~-])/gu;export{a as NEWLINE_RE,o as UNESCAPE_RE,e as dedent,r as escapeHtml,i as escapeRegExp};\n//# sourceMappingURL=index.js.map","/**\n * Forked from https://github.com/markdown-it/markdown-it-sub/blob/master/index.mjs\n */\nimport { UNESCAPE_RE } from \"@mdit/helper\";\nimport type { PluginSimple } from \"markdown-it\";\nimport type { RuleInline } from \"markdown-it/lib/parser_inline.mjs\";\n\nconst UNESCAPED_SPACES_OR_NEW_LINES_RE = /(^|[^\\\\])(\\\\\\\\)*\\s/u;\n\nconst subscriptRender: RuleInline = (state, silent) => {\n  const max = state.posMax;\n  const start = state.pos;\n\n  if (\n    state.src.charCodeAt(start) !== 126 /* ~ */ ||\n    // don’t run any pairs in validation mode\n    silent ||\n    start + 2 >= max\n  )\n    return false;\n\n  state.pos = start + 1;\n\n  let found = false;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 126 /* ~ */) {\n      found = true;\n      break;\n    }\n\n    state.md.inline.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n\n    return false;\n  }\n\n  const content = state.src.slice(start + 1, state.pos);\n\n  // don’t allow unescaped spaces/newlines inside\n  if (UNESCAPED_SPACES_OR_NEW_LINES_RE.test(content)) {\n    state.pos = start;\n\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  // Earlier we checked !silent, but this implementation does not need it\n  const openToken = state.push(\"sub_open\", \"sub\", 1);\n\n  openToken.markup = \"~\";\n\n  const textToken = state.push(\"text\", \"\", 0);\n\n  textToken.content = content.replace(UNESCAPE_RE, \"$1\");\n\n  const closeToken = state.push(\"sub_close\", \"sub\", -1);\n\n  closeToken.markup = \"~\";\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n\n  return true;\n};\n\nexport const sub: PluginSimple = (md) => {\n  md.inline.ruler.after(\"emphasis\", \"sub\", subscriptRender);\n};\n"],"mappings":"AAEkC,OAAO,GAAG,MAF5C,MAEqN,EAAE,8CCKjN,EAAmC,sBAEnC,GAA+B,EAAO,IAAW,CACrD,IAAM,EAAM,EAAM,OACZ,EAAQ,EAAM,IAEpB,GACE,EAAM,IAAI,WAAW,EAAM,GAAK,KAEhC,GACA,EAAQ,GAAK,EAEb,MAAO,GAET,EAAM,IAAM,EAAQ,EAEpB,IAAI,EAAQ,GAEZ,KAAO,EAAM,IAAM,GAAK,CACtB,GAAI,EAAM,IAAI,WAAW,EAAM,IAAI,GAAK,IAAa,CACnD,EAAQ,GACR,MAGF,EAAM,GAAG,OAAO,UAAU,EAAM,CAGlC,GAAI,CAAC,GAAS,EAAQ,IAAM,EAAM,IAGhC,MAFA,GAAM,IAAM,EAEL,GAGT,IAAM,EAAU,EAAM,IAAI,MAAM,EAAQ,EAAG,EAAM,IAAI,CAGrD,GAAI,EAAiC,KAAK,EAAQ,CAGhD,MAFA,GAAM,IAAM,EAEL,GAIT,EAAM,OAAS,EAAM,IACrB,EAAM,IAAM,EAAQ,EAGpB,IAAM,EAAY,EAAM,KAAK,WAAY,MAAO,EAAE,CAElD,EAAU,OAAS,IAEnB,IAAM,EAAY,EAAM,KAAK,OAAQ,GAAI,EAAE,CAE3C,EAAU,QAAU,EAAQ,QAAQA,EAAa,KAAK,CAEtD,IAAM,EAAa,EAAM,KAAK,YAAa,MAAO,GAAG,CAOrD,MALA,GAAW,OAAS,IAEpB,EAAM,IAAM,EAAM,OAAS,EAC3B,EAAM,OAAS,EAER,IAGI,EAAqB,GAAO,CACvC,EAAG,OAAO,MAAM,MAAM,WAAY,MAAO,EAAgB"}