import{deflateRawSync as e}from"node:zlib";import{uml as t}from"@mdit/plugin-uml";const n=t=>e(Buffer.from(t,`utf8`),{level:9}).toString(`binary`),r=e=>e<10?String.fromCharCode(48+e):e<36?String.fromCharCode(65+e-10):e<62?String.fromCharCode(97+e-36):e===62?`-`:e===63?`_`:`?`,i=(e,t,n)=>{let i=e>>2,a=(e&3)<<4|t>>4,o=(t&15)<<2|n>>6,s=n&63;return r(i&63)+r(a&63)+r(o&63)+r(s&63)},a=e=>{let t=``;for(let n=0;n<e.length;n+=3)n+2===e.length?t+=i(e.charCodeAt(n),e.charCodeAt(n+1),0):n+1===e.length?t+=i(e.charCodeAt(n),0,0):t+=i(e.charCodeAt(n),e.charCodeAt(n+1),e.charCodeAt(n+2));return t},o=(e,{type:r=`uml`,name:i=`uml`,open:o=`start${i}`,close:s=`end${i}`,fence:c=i,format:l=`svg`,server:u=`https://www.plantuml.com/plantuml`,srcGetter:d=e=>`${u}/${l}/${a(n(`@start${i}\n${e.trim()}\n@end${i}`))}`,render:f=(e,t,n,r,i)=>{let a=e[t],{content:o,info:s}=a;return a.tag=`img`,a.attrPush([`src`,d(o)]),a.attrPush([`alt`,s||`PlantUML Diagram`]),i.renderToken(e,t,n)}}={})=>{if(r===`uml`)e.use(t,{name:i,open:o,close:s,render:f});else{let t=e.renderer.rules.fence;e.renderer.rules.fence=(e,n,r,i,a)=>{let o=e[n],[s,l]=o.info.split(` `,2);return s===c?(o.info=l,f(e,n,r,i,a)):t(e,n,r,i,a)}}};export{o as plantuml};
//# sourceMappingURL=index.js.map