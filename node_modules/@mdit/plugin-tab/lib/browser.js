String.raw`\$&`;const e=e=>e.replaceAll(`&`,`&amp;`).replaceAll(`<`,`&lt;`).replaceAll(`>`,`&gt;`).replaceAll(`"`,`&quot;`).replaceAll(`'`,`&#39;`);function t(e){switch(e){case 9:case 32:return!0}return!1}const n=`@tab`,r=`${n}:active`,i=r.length,a=(e,t,n)=>{if(e.src.charCodeAt(t)!==64)return!1;let a=1;for(;a<i&&r.charCodeAt(a)===e.src.charCodeAt(t+a);a++);let o=a===i;if(!o&&a!==4)return!1;let s=t+a,c=e.skipSpaces(s);return c>s&&c<n?{isActive:o,pos:c}:!1},o=(e,t)=>(r,i,o,s)=>{if(t.state!==e)return!1;let c=r.bMarks[i]+r.tShift[i],l=r.eMarks[i],u=r.sCount[i],d=a(r,c,l);if(d===!1)return!1;if(s)return!0;let f=i+1,p=!1;for(;f<o;f++){let e=r.bMarks[f]+r.tShift[f];if(r.sCount[f]===u&&r.src[e]===`@`&&a(r,e,r.eMarks[f])){p=!0;break}}let m=r.parentType,h=r.lineMax,g=r.blkIndent;r.parentType=`tab`,r.lineMax=f-(p?1:0),r.blkIndent=u;let _=r.push(`${e}_tab_open`,``,1),v=d.pos,y=r.skipSpacesBack(l,v),b=y,x;for(;b>v;){if(r.src.charCodeAt(b)===35){for(x=b-1;r.src.charCodeAt(x)===92;)x--;if((b-x)%2==1)break}b--}let S,C=``;b===v?S=r.src.slice(v,y):(C=r.src.slice(r.skipSpaces(b+1),y),S=r.src.slice(v,r.skipSpacesBack(b,v))),_.block=!0,_.markup=n,_.info=S,_.meta={active:d.isActive},C&&(_.meta.id=C),_.map=[i,f-(p?1:0)],r.md.block.tokenize(r,i+1,f+(p?0:1));let w=r.push(`${e}_tab_close`,``,-1);return w.block=!0,w.markup=``,r.parentType=m,r.lineMax=h,r.blkIndent=g,r.line=f+(p?0:1),!0},s=(e,n)=>(r,i,a,o)=>{let s=r.bMarks[i]+r.tShift[i],c=r.eMarks[i],l=r.sCount[i];if(r.src.charCodeAt(s)!==58)return!1;let u=s+1;for(;u<=c&&r.src.charCodeAt(u)===58;)u++;let d=u-s;if(d<3)return!1;u=r.skipSpaces(u);for(let t=0;t<e.length;t++){if(r.src.charCodeAt(u)!==e.charCodeAt(t))return!1;u++}let f=!1,p;for(;u!==c;){if(p=r.src.charCodeAt(u++),p===35){f=!0;break}if(!t(p))return!1}if(o)return!0;let m=i+1,h=!1,g=u;for(;m<a;m++){let e=r.bMarks[m]+r.tShift[m],t=r.eMarks[m];if(e<t&&r.sCount[m]<l)break;if(r.sCount[m]===l&&r.src.charCodeAt(e)===58){for(u=e+1;u<=t&&r.src.charCodeAt(u)===58;u++);if(u-e>=d&&(u=r.skipSpaces(u),u>=t)){h=!0;break}}}let _=r.parentType,v=r.lineMax,y=r.blkIndent,b=n.state;r.parentType=`${e}_tabs`,r.lineMax=m-(h?1:0),r.blkIndent=l;let x=`:`.repeat(d),S=``;if(f){g=r.skipSpaces(g);let e=r.skipSpacesBack(c,g);g<e&&(S=r.src.slice(g,e))}let C=r.push(`${e}_tabs_open`,``,1);C.markup=x,C.block=!0,C.info=e,C.meta={id:S},C.map=[i,m-(h?1:0)],n.state=e,r.md.block.tokenize(r,i+1,m-(h?1:0)),n.state=b;let w=r.push(`${e}_tabs_close`,``,-1);return w.markup=x,w.block=!0,r.parentType=_,r.lineMax=v,r.blkIndent=y,r.line=m+(h?1:0),!0},c=e=>(t,n)=>{let r=[],i=-1,a=!1,o=0;for(let s=n+1;s<t.length;s++){let n=t[s],c=n.meta,l=n.type;if(n.block){if(l===`${e}_tabs_open`){o++;continue}if(l===`${e}_tabs_close`){if(o===0)break;o--;continue}if(o>0)continue;if(l===`${e}_tab_open`){a=!0,c.index=r.length,c.active&&(i===-1?i=r.length:c.active=!1),r.push({title:n.info,index:r.length,id:c.id,isActive:c.active});continue}if(l===`${e}_tab_close`)continue;a||(t[s].type=`${e}_tabs_empty`,t[s].hidden=!0)}}return{active:i,data:r}},l=(e,t)=>{let n=e[t],r=n.meta;return{title:n.info,index:r.index,id:r.id,isActive:r.active}},u={state:null},d=(t,n)=>{let{name:r=`tabs`,openRender:i=(n,i,a,o,s,c)=>{let{active:l,data:u}=n,d=i[a];d.attrJoin(`class`,`${r}-tabs-wrapper`),d.meta.id&&d.attrJoin(`data-id`,d.meta.id);let f=u.map(({title:n,id:i},a)=>`<button type="button" class="${r}-tab-button${l===a?` active`:``}" data-tab="${a}"${i?` data-id="${e(i)}"`:``}${l===a?` data-active`:``}>${e(t.renderInline(n))}</button>`);return`\
<div${c.renderAttrs(d)}>
  <div class="${r}-tabs-header">
    ${f.join(`
    `)}
  </div>
  <div class="${r}-tabs-container">
`},closeRender:a=()=>`  </div>
</div>
`,tabOpenRender:d=(e,t,n,i,a,o)=>{let s=t[n];return s.attrJoin(`class`,`${r}-tab-content${e.isActive?` active`:``}`),s.attrSet(`data-index`,e.index.toString()),e.id&&s.attrSet(`data-id`,e.id),e.isActive&&s.attrJoin(`data-active`,``),`\
<div${o.renderAttrs(t[n])}>
`},tabCloseRender:f=()=>`</div>
`}=n??{},p=c(r);t.block.ruler.before(`fence`,`${r}_tabs`,s(r,u),{alt:[`paragraph`,`reference`,`blockquote`,`list`]}),t.block.ruler.before(`paragraph`,`${r}_tab`,o(r,u),{alt:[`paragraph`,`reference`,`blockquote`,`list`]}),t.renderer.rules[`${r}_tabs_open`]=(e,t,n,r,a)=>i(p(e,t),e,t,n,r,a),t.renderer.rules[`${r}_tabs_close`]=a,t.renderer.rules[`${r}_tab_open`]=(e,t,n,r,i)=>d(l(e,t),e,t,n,r,i),t.renderer.rules[`${r}_tab_close`]=f};export{d as tab};
//# sourceMappingURL=browser.js.map