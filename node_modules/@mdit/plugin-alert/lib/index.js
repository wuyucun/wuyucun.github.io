const e=(e,t)=>(n,r,i,a)=>{if(n.sCount[r]-n.blkIndent>=4||n.level!==0&&!t)return!1;let o=n.bMarks[r]+n.tShift[r],s=n.eMarks[r];if(n.src.charCodeAt(o)!==62)return!1;let c=o+1,l=n.sCount[r]+1,u=!1;n.src.charCodeAt(c)===32?(c++,l++):n.src.charCodeAt(c)===9&&((n.bsCount[r]+l)%4==3?(c++,l++):u=!0);let d=l;for(;c<s;){let e=n.src.charCodeAt(c);if(e===9)d+=4-(d+n.bsCount[r]+(u?1:0))%4;else if(e===32)d++;else break;c++}if(d-l>=4||s-c<4||n.src.charCodeAt(c)!==91||n.src.charCodeAt(c+1)!==33)return!1;c+=2;let f=``;for(;c<s;){let e=n.src.charAt(c);if(e===`]`)break;f+=e,c++}if(c===s)return!1;let p=f.toLowerCase();if(!e.has(p)||(c=n.skipSpaces(c+1),c<s))return!1;let m=[],h=[],g=[],_=[],v=n.lineMax,y=n.parentType,b=[n.md.block.ruler.getRules(`blockquote`),n.md.block.ruler.getRules(`alert`)].flat();n.parentType=`alert`;let x=r,S=!1;for(;x<i;x++){let e=n.sCount[x]<n.blkIndent,t=n.bMarks[x]+n.tShift[x],r=n.eMarks[x];if(t>=r)break;if(n.src.charCodeAt(t++)===62&&!e){let e=n.sCount[x]+1,i=!1,o=!1;n.src.charCodeAt(t)===32?(t++,e++,i=!0):n.src.charCodeAt(t)===9&&(i=!0,(n.bsCount[x]+e)%4==3?(t++,e++):o=!0);let s=e;for(a||(m.push(n.bMarks[x]),n.bMarks[x]=t);t<r;){let e=n.src.charCodeAt(t);if(e===9)s+=4-(s+n.bsCount[x]+(o?1:0))%4;else if(e===32)s++;else break;t++}S=t>=r,a||(h.push(n.bsCount[x]),n.bsCount[x]=n.sCount[x]+1+(i?1:0),g.push(n.sCount[x]),n.sCount[x]=s-e,_.push(n.tShift[x]),n.tShift[x]=t-n.bMarks[x]);continue}if(S)break;let o=!1,s=b.length;for(let e=0;e<s;e++){let t=b[e];if(t(n,x,i,!0)){o=!0;break}}if(o){n.lineMax=x,n.blkIndent!==0&&!a&&(m.push(n.bMarks[x]),h.push(n.bsCount[x]),g.push(n.sCount[x]),_.push(n.tShift[x]),n.sCount[x]-=n.blkIndent);break}a||(m.push(n.bMarks[x]),h.push(n.bsCount[x]),g.push(n.sCount[x]),_.push(n.tShift[x]),n.sCount[x]=-1)}let C=()=>{n.lineMax=v,n.parentType=y;for(let e=0;e<_.length;e++)n.bMarks[e+r]=m[e],n.tShift[e+r]=_[e],n.sCount[e+r]=g[e],n.bsCount[e+r]=h[e]};if(r+1>=x)return a||C(),!1;if(a)return!0;let w=n.blkIndent;n.blkIndent=0;let T=[r,r+1],E=[r+1,0],D=n.push(`alert_open`,`div`,1);D.markup=p,D.attrJoin(`class`,`markdown-alert markdown-alert-${p}`),D.map=E;let O=n.push(`alert_title`,``,0);O.attrJoin(`class`,`markdown-alert-title`),O.markup=p,O.content=f,O.map=T,n.md.block.tokenize(n,r+1,x);let k=n.push(`alert_close`,`div`,-1);return k.markup=p,E[1]=n.line,n.blkIndent=w,C(),!0},t=(t,{alertNames:n=[`tip`,`warning`,`caution`,`important`,`note`],deep:r=!1,openRender:i,closeRender:a,titleRender:o}={})=>{t.block.ruler.before(`blockquote`,`alert`,e(new Set(n.map(e=>e.toLowerCase())),r),{alt:[`paragraph`,`reference`,`blockquote`,`list`]}),i&&(t.renderer.rules.alert_open=i),a&&(t.renderer.rules.alert_close=a),t.renderer.rules.alert_title=o??((e,t)=>{let n=e[t];return`<p class="markdown-alert-title">${n.content[0].toUpperCase()+n.content.slice(1).toLowerCase()}</p>\n`})};export{t as alert};
//# sourceMappingURL=index.js.map