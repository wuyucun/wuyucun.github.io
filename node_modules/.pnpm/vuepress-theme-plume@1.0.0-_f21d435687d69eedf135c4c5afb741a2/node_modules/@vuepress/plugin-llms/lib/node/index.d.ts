import { Page, App, Plugin } from 'vuepress/core';
import { SiteLocaleData } from 'vuepress/shared';
import { Logger, LiteralUnion } from '@vuepress/helper';
import { Page as Page$1 } from 'vuepress';

declare const PLUGIN_NAME = "@vuepress/plugin-llms";
declare const DEFAULT_LLMS_TITLE = "LLM Documentation";
declare const DEFAULT_LLMS_DETAILS = "This file contains links to all documentation sections.";
/** Default template for the `llms.txt` file */
declare const DEFAULT_LLMSTXT_TEMPLATE = "# {title}\n\n{description}\n\n{alternateLinks}{details}\n\n## Table of Contents\n\n{toc}";

/**
 * Link extension options for generated links
 *
 * 生成链接的扩展名选项
 */
type LinkExtension = '.html' | '.md';
/**
 * Page with additional LLM-friendly content
 *
 * 包含额外 LLM 友好内容的页面
 */
interface LLMPage extends Page {
    /**
     * The page's Markdown content
     *
     * 页面的 Markdown 内容
     *
     * @example '# Guide\n\nA guide'
     */
    markdown: string;
    /**
     * The page's excerpt
     *
     * 页面摘要
     *
     * @example 'Introduction to the guide'
     */
    excerpt: string;
}
/**
 * State object for LLM text generation
 *
 * LLM 文本生成的状态对象
 */
interface LLMState {
    /**
     * VuePress app instance
     *
     * VuePress 应用实例
     */
    app: App;
    /**
     * Site base URL
     *
     * 站点基础 URL
     */
    base: string;
    /**
     * Optional domain to prepend to URLs
     *
     * 可选的域名前缀
     */
    domain?: string;
    /**
     * Link extension for generated links
     *
     * 生成链接的扩展名
     */
    linkExtension?: LinkExtension;
    /**
     * Current locale path
     *
     * 当前语言环境路径
     */
    currentLocale: string;
    /**
     * Current site locale data
     *
     * 当前站点语言环境数据
     */
    siteLocale: SiteLocaleData;
    /**
     * Whether to generate files for all locales
     *
     * 是否为所有语言环境生成文件
     */
    allLocales: boolean;
}
type TemplateGetter = (pages: LLMPage[], state: LLMState) => string;
interface TemplateGetterOptions {
    /**
     * Site title
     *
     * Extracted from frontmatter or first h1 heading in main document (`README.md`) by default
     *
     * 站点标题
     *
     * 默认从 frontmatter 或主文档（`README.md`）中的第一个 h1 标题提取
     *
     * @example 'Awesome Tool'
     */
    title?: TemplateGetter | string;
    /**
     * Site description
     *
     * 站点描述
     *
     * @example 'Blazing fast build tool'
     */
    description?: TemplateGetter | string;
    /**
     * Additional details about the site
     *
     * 站点的额外详情
     *
     * @example 'A multi-user version of the notebook designed for companies, classrooms and research labs'
     */
    details?: TemplateGetter | string;
    /**
     * Automatically generated **T**able **o**f **C**ontents
     *
     * 自动生成的目录
     *
     * @example
     * ```md
     * - [Title](/foo.md): Lorem ipsum dolor sit amet, consectetur adipiscing elit.
     * - [Title 2](/bar/baz.md): Cras vel nibh id ipsum pharetra efficitur.
     * ```
     */
    toc?: TemplateGetter | string;
    /** Any custom variable */
    [key: string]: TemplateGetter | string | undefined;
}

declare const defaultTitleGetter: TemplateGetter;
declare const defaultDescriptionGetter: TemplateGetter;
declare const defaultDetailsGetter: TemplateGetter;
declare const defaultAlternateLinksGetter: TemplateGetter;
/**
 * Generate Table of Contents for the provided pages
 *
 * Each entry is formatted as a markdown link to the corresponding file
 *
 * @param pages - Array of LLM pages
 * @param state - State object containing generation options
 * @returns Formatted Table of Contents as markdown string
 */
declare const defaultTOCGetter: TemplateGetter;
declare const defaultTemplateGetter: TemplateGetterOptions;

/**
 * Replace template variable `{variable}` with provided value
 *
 * Falls back to fallback value if value is empty or undefined
 *
 * @param content - Template string containing placeholders
 * @param variable - Template variable name to replace
 * @param value - Value to replace the variable with
 * @param fallback - Optional fallback value if `value` is empty
 * @returns String with template variable replaced
 *
 * @example
 * ```ts
 * const template = 'Hello {name}!'
 * const result = replaceTemplateVariable(template, 'name', 'Alice', 'User')
 * console.log(result) // 'Hello Alice!'
 * ```
 */
declare const replaceTemplateVariable: (content: string, variable: string, value: string | undefined, fallback?: string) => string;
/**
 * Expand template string by replacing multiple variables with their values
 *
 * @param template - Template string containing placeholders
 * @param variables - Object mapping variable names to their values
 * @returns String with all template variables replaced
 */
declare const expandTemplate: (template: string, variables: Record<string, string | undefined>) => string;

/**
 * Extract title from markdown string
 *
 * Title is defined as the first line starting with a single `#` character
 *
 * @param markdown - Markdown content to extract title from
 * @returns Extracted title or undefined if not found
 */
declare const extractTitle: (markdown: string) => string | undefined;

declare const withBase: (link: string, base: string) => string;
/**
 * Generate a complete link with domain, base, and extension
 *
 * @param path - Page path (e.g., "/guide.html")
 * @param state - State object containing base, domain, and link extension
 * @returns Generated link with all components
 */
declare const generateLink: (path: string, { base, domain, linkExtension }: LLMState) => string;

/**
 * Generate a Markdown-formatted table of contents link for a page
 *
 * @param page - The LLM page to generate link for
 * @param state - State object containing generation options
 * @returns Formatted TOC entry as Markdown list item
 */
declare const generateTOCLink: (page: LLMPage, state: LLMState) => string;

declare const logger: Logger;

/**
 * Get string size in human-readable format
 *
 * @param string - Input string to measure
 * @returns Size string (e.g., "1.2 KB", "500 B")
 */
declare const getSizeOf: (string: string) => string;

/**
 * Strip file extension from path
 *
 * @param filepath - File path to process
 * @returns Path without extension
 */
declare const stripExt: (filepath: string) => string;

/**
 * Generate LLM-friendly documentation files for each page
 *
 * @param llmPages - Array of LLM pages to process
 * @param state - State object containing generation options
 */
declare const generateLLMFriendlyDocs: (llmPages: LLMPage[], state: LLMState) => Promise<void>;

interface LlmsPluginOptions {
    /**
     * Domain to prepend to file links
     *
     * 添加到文件链接前的域名
     *
     * @example 'https://example.com'
     */
    domain?: string;
    /**
     * Whether to generate the `llms.txt` file with site TOC
     *
     * 是否生成包含站点目录的 `llms.txt` 文件
     *
     * @default true
     */
    llmsTxt?: boolean;
    /**
     * Whether to generate the `llms-full.txt` file with all content
     *
     * 是否生成包含所有内容的 `llms-full.txt` 文件
     *
     * @default true
     */
    llmsFullTxt?: boolean;
    /**
     * Whether to generate LLM-friendly text for each page
     *
     * 是否为每个页面生成 LLM 友好的文本
     *
     * @default true
     */
    llmsPageTxt?: boolean;
    /**
     * Whether to strip HTML tags from Markdown files
     *
     * 是否从 Markdown 文件中剥离 HTML 标签
     *
     * @default true
     */
    stripHTML?: boolean;
    /**
     * Locale to process, use `'all'` for all locales
     *
     * Defaults to root locale if not set
     *
     * 要处理的语言环境，使用 `'all'` 处理所有语言环境
     *
     * 如果未设置，将使用根语言环境
     *
     * @default '/'
     */
    locale?: LiteralUnion<'all'>;
    /**
     * Page filter function
     *
     * 页面过滤函数
     *
     * @default () => true
     */
    filter?: (page: Page$1) => boolean;
    /**
     * Custom template for `llms.txt` file
     *
     * `llms.txt` 文件的自定义模板
     *
     * @default
     * ```md
     * # {title}
     *
     * > {description}
     *
     * {details}
     *
     * ## Table of Contents
     *
     * {toc}
     * ```
     */
    llmsTxtTemplate?: string;
    /**
     * Custom variables for {@link LlmsPluginOptions.llmsTxtTemplate | `llmsTxtTemplate`}
     *
     * {@link LlmsPluginOptions.llmsTxtTemplate | `llmsTxtTemplate`} 的自定义变量
     */
    llmsTxtTemplateGetter?: TemplateGetterOptions;
}

type GenerateLLMsTxtOptions = Required<Pick<LlmsPluginOptions, 'llmsTxtTemplate' | 'llmsTxtTemplateGetter'>>;
/**
 * Generate `llms.txt` file with table of contents
 *
 * @param pages - Array of LLM pages to include
 * @param state - State object containing generation options
 * @param options - Template and template getter options
 */
declare const generateLLMsTxt: (pages: LLMPage[], state: LLMState, { llmsTxtTemplate, llmsTxtTemplateGetter }: GenerateLLMsTxtOptions) => Promise<void>;

/**
 * Generate `llms-full.txt` file with all page contents
 *
 * @param llmPages - Array of LLM pages to include
 * @param state - State object containing generation options
 */
declare const generateLLMsFullTxt: (llmPages: LLMPage[], state: LLMState) => Promise<void>;

/**
 * Plugin to generate LLM-friendly documentation files
 *
 * @param llmOptions - Plugin configuration options
 *
 * @example
 * ```ts
 * import { llmsPlugin } from '@vuepress/plugin-llms'
 *
 * export default defineUserConfig({
 *   plugins: [
 *     llmsPlugin({
 *       domain: 'https://example.com',
 *       llmsTxt: true,
 *       llmsFullTxt: true,
 *     }),
 *   ],
 * })
 * ```
 */
declare const llmsPlugin: (llmOptions?: LlmsPluginOptions) => Plugin;

export { DEFAULT_LLMSTXT_TEMPLATE, DEFAULT_LLMS_DETAILS, DEFAULT_LLMS_TITLE, PLUGIN_NAME, defaultAlternateLinksGetter, defaultDescriptionGetter, defaultDetailsGetter, defaultTOCGetter, defaultTemplateGetter, defaultTitleGetter, expandTemplate, extractTitle, generateLLMFriendlyDocs, generateLLMsFullTxt, generateLLMsTxt, generateLink, generateTOCLink, getSizeOf, llmsPlugin, logger, replaceTemplateVariable, stripExt, withBase };
export type { LLMPage, LLMState, LinkExtension, LlmsPluginOptions, TemplateGetter, TemplateGetterOptions };
