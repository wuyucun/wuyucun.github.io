{"version":3,"file":"index.js","sources":["../../src/node/constants.ts","../../src/node/utils/expandTemplate.ts","../../src/node/utils/extractTitle.ts","../../src/node/utils/stripExt.ts","../../src/node/utils/generateLink.ts","../../src/node/utils/generateTOCLink.ts","../../src/node/utils/logger.ts","../../src/node/utils/getSizeOf.ts","../../src/node/templateGetter.ts","../../src/node/generateLLMFriendlyDocs.ts","../../src/node/generateLLMsTxt.ts","../../src/node/generateLLMsFullTxt.ts","../../src/node/resolveLLMPages.ts","../../src/node/llmsPlugin.ts"],"sourcesContent":["export const PLUGIN_NAME = '@vuepress/plugin-llms'\n\nexport const DEFAULT_LLMS_TITLE = 'LLM Documentation'\nexport const DEFAULT_LLMS_DETAILS =\n  'This file contains links to all documentation sections.'\n\n/** Default template for the `llms.txt` file */\nexport const DEFAULT_LLMSTXT_TEMPLATE = `\\\n# {title}\n\n{description}\n\n{alternateLinks}{details}\n\n## Table of Contents\n\n{toc}\\\n`\n","/**\n * Create regex to match template variable in format `{key}`\n *\n * @param key - Template variable name to match\n * @returns Case-insensitive regex that detects `{key}` occurrences\n *\n * @example\n * ```ts\n * const regex = templateVariable('name')\n * console.log(regex.test('Hello {name}')) // true\n * ```\n */\nconst templateVariable = (key: string): RegExp =>\n  new RegExp(`(\\\\n\\\\s*\\\\n)?\\\\{${key}\\\\}`, 'gi')\n\n/**\n * Replace template variable `{variable}` with provided value\n *\n * Falls back to fallback value if value is empty or undefined\n *\n * @param content - Template string containing placeholders\n * @param variable - Template variable name to replace\n * @param value - Value to replace the variable with\n * @param fallback - Optional fallback value if `value` is empty\n * @returns String with template variable replaced\n *\n * @example\n * ```ts\n * const template = 'Hello {name}!'\n * const result = replaceTemplateVariable(template, 'name', 'Alice', 'User')\n * console.log(result) // 'Hello Alice!'\n * ```\n */\nexport const replaceTemplateVariable = (\n  content: string,\n  variable: string,\n  value: string | undefined,\n  fallback?: string,\n): string =>\n  content.replace(templateVariable(variable), (_, prefix) => {\n    const val = value?.length ? value : fallback?.length ? fallback : ''\n    return val ? `${prefix ? '\\n\\n' : ''}${val}` : ''\n  })\n\n/**\n * Expand template string by replacing multiple variables with their values\n *\n * @param template - Template string containing placeholders\n * @param variables - Object mapping variable names to their values\n * @returns String with all template variables replaced\n */\nexport const expandTemplate = (\n  template: string,\n  variables: Record<string, string | undefined>,\n): string =>\n  Object.entries(variables).reduce(\n    (result, [key, value]) => replaceTemplateVariable(result, key, value),\n    template,\n  )\n","const MARKDOWN_TITLE_REGEXP = /^#[^#][\\s]*(.+?)#*?$/m\n\n/**\n * Extract title from markdown string\n *\n * Title is defined as the first line starting with a single `#` character\n *\n * @param markdown - Markdown content to extract title from\n * @returns Extracted title or undefined if not found\n */\nexport const extractTitle = (markdown: string): string | undefined => {\n  const matches = markdown.match(MARKDOWN_TITLE_REGEXP)\n  if (matches?.length) {\n    return matches.pop()?.trim()\n  }\n  return undefined\n}\n","import { path } from 'vuepress/utils'\n\n/**\n * Strip file extension from path\n *\n * @param filepath - File path to process\n * @returns Path without extension\n */\nexport const stripExt = (filepath: string): string => {\n  const ext = path.extname(filepath)\n\n  if (ext === '' || filepath.endsWith('/')) {\n    return filepath\n  }\n\n  return filepath.slice(0, -ext.length)\n}\n","import { removeLeadingSlash } from 'vuepress/shared'\nimport type { LLMState } from '../types.js'\nimport { stripExt } from './stripExt.js'\n\nexport const withBase = (link: string, base: string): string =>\n  link.startsWith(base) ? link : `${base}${removeLeadingSlash(link)}`\n\n/**\n * Generate a complete link with domain, base, and extension\n *\n * @param path - Page path (e.g., \"/guide.html\")\n * @param state - State object containing base, domain, and link extension\n * @returns Generated link with all components\n */\nexport const generateLink = (\n  path: string,\n  { base, domain, linkExtension }: LLMState,\n): string => {\n  const pagePath = withBase(`${stripExt(path)}${linkExtension}`, base)\n\n  return `${domain ?? ''}${pagePath}`\n}\n","import type { LLMPage, LLMState } from '../types.js'\nimport { generateLink } from './generateLink.js'\n\n/**\n * Generate a Markdown-formatted table of contents link for a page\n *\n * @param page - The LLM page to generate link for\n * @param state - State object containing generation options\n * @returns Formatted TOC entry as Markdown list item\n */\nexport const generateTOCLink = (page: LLMPage, state: LLMState): string => {\n  const { description } = page.frontmatter\n  const { autoDesc } = page.data\n  const path = generateLink(page.htmlFilePathRelative, state)\n\n  return `- [${page.title}](${path})${description && !autoDesc ? `: ${description.trim()}` : ''}\\n`\n}\n","import { Logger } from '@vuepress/helper'\nimport { PLUGIN_NAME } from '../constants.js'\n\nexport const logger = new Logger(PLUGIN_NAME)\n","import byteSize from 'byte-size'\n\n/**\n * Get string size in human-readable format\n *\n * @param string - Input string to measure\n * @returns Size string (e.g., \"1.2 KB\", \"500 B\")\n */\nexport const getSizeOf = (string: string): string =>\n  byteSize(new Blob([string]).size).toString()\n","import { entries } from '@vuepress/helper'\nimport { DEFAULT_LLMS_DETAILS, DEFAULT_LLMS_TITLE } from './constants.js'\nimport type { TemplateGetter, TemplateGetterOptions } from './types.js'\nimport { generateLink, generateTOCLink, logger } from './utils/index.js'\n\nexport const defaultTitleGetter: TemplateGetter = (pages, { siteLocale }) => {\n  const homePage = pages.find((page) => page.path === page.pathLocale)\n\n  return (\n    // home page hero title\n    (homePage?.frontmatter.heroText as string | undefined) ||\n    // site locale title\n    siteLocale.title ||\n    // home page frontmatter title\n    homePage?.title ||\n    DEFAULT_LLMS_TITLE\n  )\n}\n\nexport const defaultDescriptionGetter: TemplateGetter = (\n  pages,\n  { siteLocale },\n) => {\n  const homePage = pages.find((page) => page.path === page.pathLocale)\n\n  const description =\n    // home page hero description\n    (homePage?.frontmatter.tagline as string | undefined) ||\n    // site locale description\n    siteLocale.description ||\n    (homePage?.data.autoDesc ? '' : homePage?.frontmatter.description)\n\n  return description ? `> ${description}` : ''\n}\n\nexport const defaultDetailsGetter: TemplateGetter = (pages) => {\n  const homePage = pages.find((page) => page.path === page.pathLocale)\n\n  return (\n    // home page details\n    (homePage?.frontmatter.details as string | undefined) ||\n    DEFAULT_LLMS_DETAILS\n  )\n}\n\nexport const defaultAlternateLinksGetter: TemplateGetter = (_pages, state) => {\n  const { allLocales, app, currentLocale } = state\n\n  if (!allLocales || currentLocale !== '/') return ''\n\n  const alternateLLMTxtLinks = entries(app.siteData.locales)\n    .map(([localePath, { lang }]) => {\n      if (localePath === '/') return null\n\n      if (!lang) {\n        logger.error(\n          `No lang definition found for locale path: ${localePath}, it is omitted.`,\n        )\n\n        return null\n      }\n\n      return `- [${lang}](${generateLink(`${localePath}llms.txt`, state)})`\n    })\n    .filter((item) => item !== null)\n\n  return alternateLLMTxtLinks.length\n    ? `\\n\\n## Alternate Language Versions\\n\\n${alternateLLMTxtLinks.join('\\n')}\\n\\n`\n    : ''\n}\n\n/**\n * Generate Table of Contents for the provided pages\n *\n * Each entry is formatted as a markdown link to the corresponding file\n *\n * @param pages - Array of LLM pages\n * @param state - State object containing generation options\n * @returns Formatted Table of Contents as markdown string\n */\nexport const defaultTOCGetter: TemplateGetter = (pages, state): string =>\n  pages.map((page) => generateTOCLink(page, state)).join('')\n\nexport const defaultTemplateGetter: TemplateGetterOptions = {\n  title: defaultTitleGetter,\n  description: defaultDescriptionGetter,\n  details: defaultDetailsGetter,\n  alternateLinks: defaultAlternateLinksGetter,\n  toc: defaultTOCGetter,\n}\n","import matter from 'gray-matter'\nimport type { PageFrontmatter } from 'vuepress'\nimport { colors, fs, path } from 'vuepress/utils'\nimport type { LLMPage, LLMState } from './types.js'\nimport { generateLink, logger } from './utils/index.js'\n\n/**\n * Generate LLM-friendly documentation files for each page\n *\n * @param llmPages - Array of LLM pages to process\n * @param state - State object containing generation options\n */\nexport const generateLLMFriendlyDocs = async (\n  llmPages: LLMPage[],\n  state: LLMState,\n): Promise<void> => {\n  logger.load(`Generating llm friendly docs`)\n\n  const promises = llmPages.map(async (page) => {\n    const metadata: PageFrontmatter = {\n      url: generateLink(page.htmlFilePathRelative, {\n        ...state,\n        linkExtension: '.md',\n      }),\n    }\n\n    if (page.frontmatter.description && !page.data.autoDesc) {\n      metadata.description = page.frontmatter.description\n    }\n\n    const markdownFilePathRelative = page.htmlFilePathRelative.replace(\n      /\\.html$/,\n      '.md',\n    )\n    const markdownFilePath = state.app.dir.dest(markdownFilePathRelative)\n    const markdownContent = matter.stringify(page.markdown, metadata)\n\n    try {\n      await fs.mkdir(path.dirname(markdownFilePath), { recursive: true })\n      await fs.writeFile(markdownFilePath, markdownContent, 'utf-8')\n      logger.load(\n        `Generated llm friendly docs - ${colors.cyan(markdownFilePathRelative)}`,\n      )\n    } catch (err) {\n      logger.error(\n        `Failed to process ${colors.cyan(markdownFilePathRelative)}: ${(err as Error).message}`,\n      )\n    }\n  })\n\n  await Promise.all(promises)\n\n  logger.succeed(\n    `Generated LLM-friendly docs for ${llmPages.length} documentation links`,\n  )\n}\n","import { entries, fromEntries } from '@vuepress/helper'\nimport { millify } from 'millify'\nimport { estimateTokenCount } from 'tokenx'\nimport { isFunction, removeLeadingSlash } from 'vuepress/shared'\nimport { colors, fs, path } from 'vuepress/utils'\nimport type { LlmsPluginOptions } from './options.js'\nimport { defaultTemplateGetter } from './templateGetter.js'\nimport type { LLMPage, LLMState } from './types.js'\nimport { expandTemplate, getSizeOf, logger } from './utils/index.js'\n\ntype GenerateLLMsTxtOptions = Required<\n  Pick<LlmsPluginOptions, 'llmsTxtTemplate' | 'llmsTxtTemplateGetter'>\n>\n\n/**\n * Generate `llms.txt` file with table of contents\n *\n * @param pages - Array of LLM pages to include\n * @param state - State object containing generation options\n * @param options - Template and template getter options\n */\nexport const generateLLMsTxt = async (\n  pages: LLMPage[],\n  state: LLMState,\n  { llmsTxtTemplate, llmsTxtTemplateGetter }: GenerateLLMsTxtOptions,\n): Promise<void> => {\n  const { app, allLocales, currentLocale } = state\n  const llmsTxtRelativePath = allLocales\n    ? path.join(removeLeadingSlash(currentLocale), 'llms.txt')\n    : 'llms.txt'\n\n  logger.load(`Generating ${llmsTxtRelativePath}`)\n\n  const llmsTxtTemplateData = fromEntries(\n    entries({\n      ...defaultTemplateGetter,\n      ...llmsTxtTemplateGetter,\n    }).map(([key, value]) => [\n      key,\n      isFunction(value) ? value(pages, state) : value,\n    ]),\n  )\n  const llmsTxt = expandTemplate(llmsTxtTemplate, llmsTxtTemplateData)\n\n  await fs.writeFile(app.dir.dest(llmsTxtRelativePath), llmsTxt, 'utf-8')\n\n  logger.succeed(\n    expandTemplate(\n      'Generated {file} (~{tokens} tokens, {size}) with {pageCount} documentation links',\n      {\n        file: colors.cyan(llmsTxtRelativePath),\n        tokens: colors.bold(millify(estimateTokenCount(llmsTxt))),\n        size: colors.bold(getSizeOf(llmsTxt)),\n        pageCount: colors.bold(pages.length),\n      },\n    ),\n  )\n}\n","import matter from 'gray-matter'\nimport { millify } from 'millify'\nimport { estimateTokenCount } from 'tokenx'\nimport type { PageFrontmatter } from 'vuepress'\nimport { removeLeadingSlash } from 'vuepress/shared'\nimport { colors, fs, path } from 'vuepress/utils'\nimport type { LLMPage, LLMState } from './types.js'\nimport {\n  expandTemplate,\n  extractTitle,\n  generateLink,\n  getSizeOf,\n  logger,\n} from './utils/index.js'\n\nconst PAGE_SEPARATOR = '\\n---\\n\\n'\n\n/**\n * Generate `llms-full.txt` file with all page contents\n *\n * @param llmPages - Array of LLM pages to include\n * @param state - State object containing generation options\n */\nexport const generateLLMsFullTxt = async (\n  llmPages: LLMPage[],\n  state: LLMState,\n): Promise<void> => {\n  const { app, allLocales, currentLocale } = state\n  const llmsFullTxtRelativePath = allLocales\n    ? path.join(removeLeadingSlash(currentLocale), 'llms-full.txt')\n    : 'llms-full.txt'\n\n  logger.load(`Generating ${llmsFullTxtRelativePath}`)\n\n  const pageContents = llmPages.map((page) => {\n    const metadata: PageFrontmatter = {\n      url: generateLink(page.htmlFilePathRelative, state),\n    }\n\n    if (page.frontmatter.description && !page.data.autoDesc) {\n      metadata.description = page.frontmatter.description\n    }\n\n    // completion title in markdown content\n    const content = extractTitle(page.markdown)\n      ? page.markdown\n      : `# ${page.title}\\n${page.markdown}`\n\n    return matter.stringify(content, metadata)\n  })\n\n  const llmsFullTxt = pageContents.join(PAGE_SEPARATOR)\n\n  await fs.writeFile(\n    app.dir.dest(llmsFullTxtRelativePath),\n    llmsFullTxt,\n    'utf-8',\n  )\n\n  logger.succeed(\n    expandTemplate(\n      'Generated {file} (~{tokens} tokens, {size}) with {pageCount} documentation links',\n      {\n        file: colors.cyan(llmsFullTxtRelativePath),\n        tokens: colors.bold(millify(estimateTokenCount(llmsFullTxt))),\n        size: colors.bold(getSizeOf(llmsFullTxt)),\n        pageCount: colors.bold(llmPages.length),\n      },\n    ),\n  )\n}\n","import matter from 'gray-matter'\nimport { remark } from 'remark'\nimport type { Plugin } from 'unified'\nimport { remove as unistRemove } from 'unist-util-remove'\nimport type { App } from 'vuepress'\nimport type { LlmsPluginOptions } from './options.js'\nimport type { LLMPage } from './types.js'\n\n/**\n * Remove HTML from markdown AST\n */\nconst cleanMarkdown: Plugin = () => (tree) => {\n  unistRemove(tree, { type: 'html' })\n\n  return tree\n}\n\nconst remarkInstance = remark().use(cleanMarkdown)\n\ninterface ResolveLLMPagesOptions extends Required<\n  Pick<LlmsPluginOptions, 'filter' | 'stripHTML'>\n> {\n  currentLocale: string\n}\n\n/**\n * Resolve and filter pages for LLM processing\n *\n * @param app - VuePress app instance\n * @param options - Filtering and processing options\n * @returns Array of LLM pages\n */\nexport const resolveLLMPages = (\n  app: App,\n  { stripHTML, filter, currentLocale }: ResolveLLMPagesOptions,\n): LLMPage[] => {\n  const llmPages: LLMPage[] = []\n\n  for (const page of app.pages) {\n    if (\n      // not in current locale\n      page.pathLocale !== currentLocale ||\n      // non-markdown pages\n      !page.filePath?.endsWith('.md') ||\n      // disabled\n      page.frontmatter.llmstxt === false ||\n      // filtered\n      !filter(page)\n    ) {\n      continue\n    }\n\n    const { content } = matter(page.content)\n\n    // Ignore empty pages\n    if (!content.trim().length) continue\n\n    if (stripHTML) {\n      page.markdown = String(remarkInstance.processSync(content))\n    }\n\n    llmPages.push(page as LLMPage)\n  }\n\n  // Sort pages by path for better organization\n  llmPages.sort((a, b) => a.path.localeCompare(b.path))\n\n  return llmPages\n}\n","import type { Plugin } from 'vuepress/core'\nimport { removeEndingSlash } from 'vuepress/shared'\nimport { DEFAULT_LLMSTXT_TEMPLATE, PLUGIN_NAME } from './constants.js'\nimport { generateLLMFriendlyDocs } from './generateLLMFriendlyDocs.js'\nimport { generateLLMsFullTxt } from './generateLLMsFullTxt.js'\nimport { generateLLMsTxt } from './generateLLMsTxt.js'\nimport type { LlmsPluginOptions } from './options.js'\nimport { resolveLLMPages } from './resolveLLMPages.js'\nimport type { LLMState } from './types.js'\nimport { logger } from './utils/index.js'\n\n/**\n * Plugin to generate LLM-friendly documentation files\n *\n * @param llmOptions - Plugin configuration options\n *\n * @example\n * ```ts\n * import { llmsPlugin } from '@vuepress/plugin-llms'\n *\n * export default defineUserConfig({\n *   plugins: [\n *     llmsPlugin({\n *       domain: 'https://example.com',\n *       llmsTxt: true,\n *       llmsFullTxt: true,\n *     }),\n *   ],\n * })\n * ```\n */\nexport const llmsPlugin =\n  (llmOptions: LlmsPluginOptions = {}): Plugin =>\n  (app) => {\n    if (app.env.isDebug) logger.info('Options: ', llmOptions)\n\n    return {\n      name: PLUGIN_NAME,\n\n      onGenerated: async () => {\n        const {\n          domain,\n          llmsTxt = true,\n          llmsFullTxt = true,\n          llmsPageTxt = true,\n          filter = () => true,\n          stripHTML = true,\n          llmsTxtTemplate = DEFAULT_LLMSTXT_TEMPLATE,\n          llmsTxtTemplateGetter = {},\n          locale = '/',\n        } = llmOptions\n\n        const linkExtension = llmsPageTxt ? '.md' : '.html'\n        const { locales, ...base } = app.siteData\n\n        const generateLLM = async (localePath: string): Promise<void> => {\n          const llmState: LLMState = {\n            app,\n            base: app.options.base,\n            domain: domain ? removeEndingSlash(domain) : undefined,\n            linkExtension,\n            currentLocale: localePath,\n            siteLocale: {\n              ...base,\n              ...locales[localePath],\n            },\n            allLocales: locale === 'all',\n          }\n\n          const llmPages = resolveLLMPages(app, {\n            stripHTML,\n            filter,\n            currentLocale: localePath,\n          })\n\n          if (llmsTxt) {\n            await generateLLMsTxt(llmPages, llmState, {\n              llmsTxtTemplate,\n              llmsTxtTemplateGetter,\n            })\n          }\n\n          if (llmsFullTxt) {\n            await generateLLMsFullTxt(llmPages, llmState)\n          }\n\n          if (llmsPageTxt) {\n            await generateLLMFriendlyDocs(llmPages, llmState)\n          }\n        }\n\n        if (locale === 'all') {\n          // Generate llms for all locales\n          for (const localePath in app.siteData.locales) {\n            await generateLLM(localePath)\n          }\n        } else {\n          // Generate llms for the specified locale\n          await generateLLM(locale)\n        }\n      },\n    }\n  }\n"],"names":["PLUGIN_NAME","DEFAULT_LLMS_TITLE","DEFAULT_LLMS_DETAILS","DEFAULT_LLMSTXT_TEMPLATE","templateVariable","key","replaceTemplateVariable","content","variable","value","fallback","_","prefix","val","expandTemplate","template","variables","result","MARKDOWN_TITLE_REGEXP","extractTitle","markdown","matches","stripExt","filepath","ext","path","withBase","link","base","removeLeadingSlash","generateLink","domain","linkExtension","pagePath","generateTOCLink","page","state","description","autoDesc","logger","Logger","getSizeOf","string","byteSize","defaultTitleGetter","pages","siteLocale","homePage","defaultDescriptionGetter","defaultDetailsGetter","defaultAlternateLinksGetter","_pages","allLocales","app","currentLocale","alternateLLMTxtLinks","entries","localePath","lang","item","defaultTOCGetter","defaultTemplateGetter","generateLLMFriendlyDocs","llmPages","promises","metadata","markdownFilePathRelative","markdownFilePath","markdownContent","matter","fs","colors","err","generateLLMsTxt","llmsTxtTemplate","llmsTxtTemplateGetter","llmsTxtRelativePath","llmsTxtTemplateData","fromEntries","isFunction","llmsTxt","millify","estimateTokenCount","PAGE_SEPARATOR","generateLLMsFullTxt","llmsFullTxtRelativePath","llmsFullTxt","cleanMarkdown","tree","unistRemove","remarkInstance","remark","resolveLLMPages","stripHTML","filter","a","b","llmsPlugin","llmOptions","llmsPageTxt","locale","locales","generateLLM","llmState","removeEndingSlash"],"mappings":"4aAAO,MAAMA,EAAc,wBAEdC,EAAqB,oBACrBC,EACX,0DAGWC,EAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OCKlCC,GAAoBC,GACxB,IAAI,OAAO,mBAAmBA,CAAG,MAAO,IAAI,EAoBjCC,EAA0B,CACrCC,EACAC,EACAC,EACAC,IAEAH,EAAQ,QAAQH,GAAiBI,CAAQ,EAAG,CAACG,EAAGC,IAAW,CACzD,MAAMC,EAAMJ,GAAO,OAASA,EAAQC,GAAU,OAASA,EAAW,GAClE,OAAOG,EAAM,GAAGD,EAAS;AAAA;AAAA,EAAS,EAAE,GAAGC,CAAG,GAAK,EACjD,CAAC,EASUC,EAAiB,CAC5BC,EACAC,IAEA,OAAO,QAAQA,CAAS,EAAE,OACxB,CAACC,EAAQ,CAACZ,EAAKI,CAAK,IAAMH,EAAwBW,EAAQZ,EAAKI,CAAK,EACpEM,CACF,EC1DIG,GAAwB,wBAUjBC,EAAgBC,GAAyC,CACpE,MAAMC,EAAUD,EAAS,MAAMF,EAAqB,EACpD,GAAIG,GAAS,OACX,OAAOA,EAAQ,IAAA,GAAO,MAG1B,ECRaC,EAAYC,GAA6B,CACpD,MAAMC,EAAMC,EAAK,QAAQF,CAAQ,EAEjC,OAAIC,IAAQ,IAAMD,EAAS,SAAS,GAAG,EAC9BA,EAGFA,EAAS,MAAM,EAAG,CAACC,EAAI,MAAM,CACtC,ECZaE,EAAW,CAACC,EAAcC,IACrCD,EAAK,WAAWC,CAAI,EAAID,EAAO,GAAGC,CAAI,GAAGC,EAAmBF,CAAI,CAAC,GAStDG,EAAe,CAC1BL,EACA,CAAE,KAAAG,EAAM,OAAAG,EAAQ,cAAAC,CAAc,IACnB,CACX,MAAMC,EAAWP,EAAS,GAAGJ,EAASG,CAAI,CAAC,GAAGO,CAAa,GAAIJ,CAAI,EAEnE,MAAO,GAAGG,GAAU,EAAE,GAAGE,CAAQ,EACnC,ECXaC,EAAkB,CAACC,EAAeC,IAA4B,CACzE,KAAM,CAAE,YAAAC,CAAY,EAAIF,EAAK,YACvB,CAAE,SAAAG,CAAS,EAAIH,EAAK,KACpBV,EAAOK,EAAaK,EAAK,qBAAsBC,CAAK,EAE1D,MAAO,MAAMD,EAAK,KAAK,KAAKV,CAAI,IAAIY,GAAe,CAACC,EAAW,KAAKD,EAAY,KAAA,CAAM,GAAK,EAAE;AAAA,CAC/F,ECbaE,EAAS,IAAIC,EAAOxC,CAAW,ECK/ByC,EAAaC,GACxBC,EAAS,IAAI,KAAK,CAACD,CAAM,CAAC,EAAE,IAAI,EAAE,SAAA,ECJvBE,EAAqC,CAACC,EAAO,CAAE,WAAAC,CAAW,IAAM,CAC3E,MAAMC,EAAWF,EAAM,KAAMV,GAASA,EAAK,OAASA,EAAK,UAAU,EAEnE,OAEGY,GAAU,YAAY,UAEvBD,EAAW,OAEXC,GAAU,OACV9C,CAEJ,EAEa+C,EAA2C,CACtDH,EACA,CAAE,WAAAC,CAAW,IACV,CACH,MAAMC,EAAWF,EAAM,KAAMV,GAASA,EAAK,OAASA,EAAK,UAAU,EAE7DE,EAEHU,GAAU,YAAY,SAEvBD,EAAW,cACVC,GAAU,KAAK,SAAW,GAAKA,GAAU,YAAY,aAExD,OAAOV,EAAc,KAAKA,CAAW,GAAK,EAC5C,EAEaY,EAAwCJ,GAClCA,EAAM,KAAMV,GAASA,EAAK,OAASA,EAAK,UAAU,GAItD,YAAY,SACvBjC,EAISgD,EAA8C,CAACC,EAAQf,IAAU,CAC5E,KAAM,CAAE,WAAAgB,EAAY,IAAAC,EAAK,cAAAC,CAAc,EAAIlB,EAE3C,GAAI,CAACgB,GAAcE,IAAkB,IAAK,MAAO,GAEjD,MAAMC,EAAuBC,EAAQH,EAAI,SAAS,OAAO,EACtD,IAAI,CAAC,CAACI,EAAY,CAAE,KAAAC,CAAK,CAAC,IACrBD,IAAe,IAAY,KAE1BC,EAQE,MAAMA,CAAI,KAAK5B,EAAa,GAAG2B,CAAU,WAAYrB,CAAK,CAAC,KAPhEG,EAAO,MACL,6CAA6CkB,CAAU,kBACzD,EAEO,KAIV,EACA,OAAQE,GAASA,IAAS,IAAI,EAEjC,OAAOJ,EAAqB,OACxB;AAAA;AAAA;AAAA;AAAA,EAAyCA,EAAqB,KAAK;AAAA,CAAI,CAAC;AAAA;AAAA,EACxE,EACN,EAWaK,EAAmC,CAACf,EAAOT,IACtDS,EAAM,IAAKV,GAASD,EAAgBC,EAAMC,CAAK,CAAC,EAAE,KAAK,EAAE,EAE9CyB,EAA+C,CAC1D,MAAOjB,EACP,YAAaI,EACb,QAASC,EACT,eAAgBC,EAChB,IAAKU,CACP,EC7EaE,EAA0B,MACrCC,EACA3B,IACkB,CAClBG,EAAO,KAAK,8BAA8B,EAE1C,MAAMyB,EAAWD,EAAS,IAAI,MAAO5B,GAAS,CAC5C,MAAM8B,EAA4B,CAChC,IAAKnC,EAAaK,EAAK,qBAAsB,CAC3C,GAAGC,EACH,cAAe,KACjB,CAAC,CACH,EAEID,EAAK,YAAY,aAAe,CAACA,EAAK,KAAK,WAC7C8B,EAAS,YAAc9B,EAAK,YAAY,aAG1C,MAAM+B,EAA2B/B,EAAK,qBAAqB,QACzD,UACA,KACF,EACMgC,EAAmB/B,EAAM,IAAI,IAAI,KAAK8B,CAAwB,EAC9DE,EAAkBC,EAAO,UAAUlC,EAAK,SAAU8B,CAAQ,EAEhE,GAAI,CACF,MAAMK,EAAG,MAAM7C,EAAK,QAAQ0C,CAAgB,EAAG,CAAE,UAAW,EAAK,CAAC,EAClE,MAAMG,EAAG,UAAUH,EAAkBC,EAAiB,OAAO,EAC7D7B,EAAO,KACL,iCAAiCgC,EAAO,KAAKL,CAAwB,CAAC,EACxE,CACF,OAASM,EAAK,CACZjC,EAAO,MACL,qBAAqBgC,EAAO,KAAKL,CAAwB,CAAC,KAAMM,EAAc,OAAO,EACvF,CACF,CACF,CAAC,EAED,MAAM,QAAQ,IAAIR,CAAQ,EAE1BzB,EAAO,QACL,mCAAmCwB,EAAS,MAAM,sBACpD,CACF,EClCaU,EAAkB,MAC7B5B,EACAT,EACA,CAAE,gBAAAsC,EAAiB,sBAAAC,CAAsB,IACvB,CAClB,KAAM,CAAE,IAAAtB,EAAK,WAAAD,EAAY,cAAAE,CAAc,EAAIlB,EACrCwC,EAAsBxB,EACxB3B,EAAK,KAAKI,EAAmByB,CAAa,EAAG,UAAU,EACvD,WAEJf,EAAO,KAAK,cAAcqC,CAAmB,EAAE,EAE/C,MAAMC,EAAsBC,EAC1BtB,EAAQ,CACN,GAAGK,EACH,GAAGc,CACL,CAAC,EAAE,IAAI,CAAC,CAACtE,EAAKI,CAAK,IAAM,CACvBJ,EACA0E,EAAWtE,CAAK,EAAIA,EAAMoC,EAAOT,CAAK,EAAI3B,CAC5C,CAAC,CACH,EACMuE,EAAUlE,EAAe4D,EAAiBG,CAAmB,EAEnE,MAAMP,EAAG,UAAUjB,EAAI,IAAI,KAAKuB,CAAmB,EAAGI,EAAS,OAAO,EAEtEzC,EAAO,QACLzB,EACE,mFACA,CACE,KAAMyD,EAAO,KAAKK,CAAmB,EACrC,OAAQL,EAAO,KAAKU,EAAQC,EAAmBF,CAAO,CAAC,CAAC,EACxD,KAAMT,EAAO,KAAK9B,EAAUuC,CAAO,CAAC,EACpC,UAAWT,EAAO,KAAK1B,EAAM,MAAM,CACrC,CACF,CACF,CACF,EC1CMsC,GAAiB;AAAA;AAAA;AAAA,EAQVC,EAAsB,MACjCrB,EACA3B,IACkB,CAClB,KAAM,CAAE,IAAAiB,EAAK,WAAAD,EAAY,cAAAE,CAAc,EAAIlB,EACrCiD,EAA0BjC,EAC5B3B,EAAK,KAAKI,EAAmByB,CAAa,EAAG,eAAe,EAC5D,gBAEJf,EAAO,KAAK,cAAc8C,CAAuB,EAAE,EAmBnD,MAAMC,EAjBevB,EAAS,IAAK5B,GAAS,CAC1C,MAAM8B,EAA4B,CAChC,IAAKnC,EAAaK,EAAK,qBAAsBC,CAAK,CACpD,EAEID,EAAK,YAAY,aAAe,CAACA,EAAK,KAAK,WAC7C8B,EAAS,YAAc9B,EAAK,YAAY,aAI1C,MAAM5B,EAAUY,EAAagB,EAAK,QAAQ,EACtCA,EAAK,SACL,KAAKA,EAAK,KAAK;AAAA,EAAKA,EAAK,QAAQ,GAErC,OAAOkC,EAAO,UAAU9D,EAAS0D,CAAQ,CAC3C,CAAC,EAEgC,KAAKkB,EAAc,EAEpD,MAAMb,EAAG,UACPjB,EAAI,IAAI,KAAKgC,CAAuB,EACpCC,EACA,OACF,EAEA/C,EAAO,QACLzB,EACE,mFACA,CACE,KAAMyD,EAAO,KAAKc,CAAuB,EACzC,OAAQd,EAAO,KAAKU,EAAQC,EAAmBI,CAAW,CAAC,CAAC,EAC5D,KAAMf,EAAO,KAAK9B,EAAU6C,CAAW,CAAC,EACxC,UAAWf,EAAO,KAAKR,EAAS,MAAM,CACxC,CACF,CACF,CACF,EC3DMwB,GAAwB,IAAOC,IACnCC,GAAYD,EAAM,CAAE,KAAM,MAAO,CAAC,EAE3BA,GAGHE,GAAiBC,EAAAA,EAAS,IAAIJ,EAAa,EAepCK,GAAkB,CAC7BvC,EACA,CAAE,UAAAwC,EAAW,OAAAC,EAAQ,cAAAxC,CAAc,IACrB,CACd,MAAMS,EAAsB,CAAA,EAE5B,UAAW5B,KAAQkB,EAAI,MAAO,CAC5B,GAEElB,EAAK,aAAemB,GAEpB,CAACnB,EAAK,UAAU,SAAS,KAAK,GAE9BA,EAAK,YAAY,UAAY,IAE7B,CAAC2D,EAAO3D,CAAI,EAEZ,SAGF,KAAM,CAAE,QAAA5B,CAAQ,EAAI8D,EAAOlC,EAAK,OAAO,EAGlC5B,EAAQ,KAAA,EAAO,SAEhBsF,IACF1D,EAAK,SAAW,OAAOuD,GAAe,YAAYnF,CAAO,CAAC,GAG5DwD,EAAS,KAAK5B,CAAe,EAC/B,CAGA,OAAA4B,EAAS,KAAK,CAACgC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAE7CjC,CACT,ECrCakC,GACX,CAACC,EAAgC,CAAA,IAChC7C,IACKA,EAAI,IAAI,SAASd,EAAO,KAAK,YAAa2D,CAAU,EAEjD,CACL,KAAMlG,EAEN,YAAa,SAAY,CACvB,KAAM,CACJ,OAAA+B,EACA,QAAAiD,EAAU,GACV,YAAAM,EAAc,GACd,YAAAa,EAAc,GACd,OAAAL,EAAS,IAAM,GACf,UAAAD,EAAY,GACZ,gBAAAnB,EAAkBvE,EAClB,sBAAAwE,EAAwB,CAAA,EACxB,OAAAyB,EAAS,GACX,EAAIF,EAEElE,EAAgBmE,EAAc,MAAQ,QACtC,CAAE,QAAAE,EAAS,GAAGzE,CAAK,EAAIyB,EAAI,SAE3BiD,EAAc,MAAO7C,GAAsC,CAC/D,MAAM8C,EAAqB,CACzB,IAAAlD,EACA,KAAMA,EAAI,QAAQ,KAClB,OAAQtB,EAASyE,EAAkBzE,CAAM,EAAI,OAC7C,cAAAC,EACA,cAAeyB,EACf,WAAY,CACV,GAAG7B,EACH,GAAGyE,EAAQ5C,CAAU,CACvB,EACA,WAAY2C,IAAW,KACzB,EAEMrC,EAAW6B,GAAgBvC,EAAK,CACpC,UAAAwC,EACA,OAAAC,EACA,cAAerC,CACjB,CAAC,EAEGuB,GACF,MAAMP,EAAgBV,EAAUwC,EAAU,CACxC,gBAAA7B,EACA,sBAAAC,CACF,CAAC,EAGCW,GACF,MAAMF,EAAoBrB,EAAUwC,CAAQ,EAG1CJ,GACF,MAAMrC,EAAwBC,EAAUwC,CAAQ,CAEpD,EAEA,GAAIH,IAAW,MAEb,UAAW3C,KAAcJ,EAAI,SAAS,QACpC,MAAMiD,EAAY7C,CAAU,OAI9B,MAAM6C,EAAYF,CAAM,CAE5B,CACF"}