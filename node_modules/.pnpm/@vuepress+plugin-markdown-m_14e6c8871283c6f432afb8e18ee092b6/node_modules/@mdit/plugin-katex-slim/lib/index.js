import{escapeHtml as e}from"@mdit/helper";import{tex as t}from"@mdit/plugin-tex";let n=!0,r;try{r=await import(`katex`)}catch{n=!1}const i=(t,n,i)=>{let a;try{a=r.renderToString(t,n)}catch(n){if(n instanceof r.ParseError)console.error(n),a=`<span class='katex-error' title='${e(n.toString())}'>${e(t)}</span>`;else throw n}return i?.(a,!1)??a},a=(t,n,i)=>{let a;try{a=`<p class='katex-block'>${r.renderToString(t,n)}</p>\n`}catch(n){if(n instanceof r.ParseError)console.error(n),a=`<p class='katex-block katex-error' title='${e(n.toString())}'>${e(t)}</p>\n`;else throw n}return i?.(a,!0)??a},o=(e,{allowInlineWithSpace:r=!1,delimiters:o,mathFence:s,logger:c=e=>e===`newLineInDisplayMode`?`ignore`:`warn`,transformer:l,...u}={})=>{if(!n)throw Error(`[@mdit/plugin-katex-slim]: "katex" is not installed!`);let d=Object.assign({macros:{},throwOnError:!1},u);e.use(t,{allowInlineWithSpace:r,delimiters:o,mathFence:s,render:(e,t,n)=>{let r=Object.assign({},d,{strict:(e,t,r)=>c(e,t,r,n)??`ignore`,displayMode:t});return t?a(e,r,l):i(e,r,l)}})};export{o as katex};
//# sourceMappingURL=index.js.map