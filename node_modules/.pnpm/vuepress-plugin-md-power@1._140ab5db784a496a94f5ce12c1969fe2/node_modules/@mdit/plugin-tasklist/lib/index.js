const e=(e,t,n)=>{let r=e.attrIndex(t),i=[t,n];r<0?e.attrPush(i):e.attrs[r]=i},t=(e,t)=>{let n=e[t].level-1;for(let r=t-1;r>=0;r--)if(e[r].level===n)return r;return-1},n=e=>e.type===`inline`,r=e=>e.type===`paragraph_open`,i=e=>e.type===`list_item_open`,a=e=>{let t=e.content;if(t.length<4||t.charCodeAt(0)!==91||t.charCodeAt(2)!==93)return!1;let n=t.charCodeAt(3);if(n!==32&&n!==160)return!1;let r=t.charCodeAt(1);return r===120||r===88?`checked`:r===32||r===160},o=(o,{disabled:s=!0,label:c=!0,containerClass:l=`task-list-container`,itemClass:u=`task-list-item`,checkboxClass:d=`task-list-item-checkbox`,labelClass:f=`task-list-item-label`}={})=>{o.core.ruler.after(`inline`,`task_list`,o=>{let p=o.tokens;o.env.tasklistId||=0;for(let m=2;m<p.length;m++){let h=p[m];if(!n(h)||!r(p[m-1])||!i(p[m-2]))continue;let g=a(h);if(g===!1)continue;h.children??=[],h.children[0].content=h.children[0].content.slice(3);let _=`task-item-${o.env.tasklistId++}`;if(c){let e=new o.Token(`label_open`,`label`,1);e.attrs=[[`class`,f],[`for`,_]],h.children.unshift(e),h.children.push(new o.Token(`label_close`,`label`,-1))}let v=new o.Token(`checkbox_input`,`input`,0);v.attrs=[[`type`,`checkbox`],[`class`,d],[`id`,_]],g===`checked`&&v.attrs.push([`checked`,`checked`]),s&&v.attrs.push([`disabled`,`disabled`]),h.children.unshift(v),e(p[m-2],`class`,u),e(p[t(p,m-2)],`class`,l)}return!0})};export{o as tasklist};
//# sourceMappingURL=index.js.map